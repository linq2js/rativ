<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>rativ</title><meta name="description" content="Documentation for rativ"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">rativ</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>rativ </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><ul>
<li><a href="#rativ"><code>Rativ</code></a><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#concepts">Concepts</a></li>
<li><a href="#recipes">Recipes</a><ul>
<li><a href="#every-callbacks-are-stable">Every callbacks are stable</a></li>
<li><a href="#amazing-atoms">Amazing atoms</a></li>
<li><a href="#dealing-with-async-data">Dealing with async data</a></li>
<li><a href="#selective-update-with-slots">Selective update with Slots</a></li>
<li><a href="#element-directive">Element directive</a></li>
<li><a href="#mutation-helpers">Mutation helpers</a></li>
<li><a href="#performance-test">Performance Test</a></li>
</ul>
</li>
<li><a href="#caveats">Caveats</a><ul>
<li><a href="#do-not-destruct-props-object">Do not destruct props object</a></li>
<li><a href="#taking-snapshot-of-atom">Taking snapshot of atom</a></li>
</ul>
</li>
<li><a href="#api-reference">API reference</a></li>
</ul>
</li>
</ul>

<a href="#rativ" id="rativ" style="color: inherit; text-decoration: none;">
  <h1><code>Rativ</code></h1>
</a>
<p>A React library for creating reactive components</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p><strong>with NPM</strong></p>
<pre><code class="language-bash"><span class="hl-0">npm i rativ --save</span>
</code></pre>
<p><strong>with YARN</strong></p>
<pre><code class="language-bash"><span class="hl-0">yarn add rativ</span>
</code></pre>

<a href="#motivation" id="motivation" style="color: inherit; text-decoration: none;">
  <h2>Motivation</h2>
</a>
<p>This library is inspired by SolidJS. Rativ aims to optimize React app in the best way, so it provides many ways to achieve that goal.</p>

<a href="#concepts" id="concepts" style="color: inherit; text-decoration: none;">
  <h2>Concepts</h2>
</a>
<p>A stable component is divided into 2 parts: Stable and Unstable parts. Stable part contains the declarations that are fixed since initialization phase, they runs once only, Unstable part contains the changes that are re-rendered continuously by changes of the component itself or its parent. Stable part cannot contains any React hook but Unstable part can</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">stable</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">MyComp</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// Stable part</span><br/><span class="hl-0">  </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">myvar</span><span class="hl-0"> = </span><span class="hl-8">0</span><span class="hl-0">;</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// Unstable part, it acts like functional component body</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">useState</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-7">// return React node as usual</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>
<p>With a stable part, we can declare stable variables, and functions, which means we don&#39;t need useRef, useMemo, useCallback any more. However, we need those hooks if we need variables that can be updated when component props are changed</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">MyComp</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useMemo() hook</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">computedValue</span><span class="hl-0"> = </span><span class="hl-6">doHeavyComputationWithProps</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useRef() hook</span><br/><span class="hl-0">  </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">stableVariable</span><span class="hl-0"> = </span><span class="hl-8">0</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useCallback() or useEvent() to optimize this</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">handleClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// the props object is always fresh</span><br/><span class="hl-0">    </span><span class="hl-7">// so DO NOT destruct it</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">name</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// if we need a variable that can update when props updated, just put it in unstable part</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">dynamicVariable</span><span class="hl-0"> = </span><span class="hl-6">useMemo</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {}, [</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">something</span><span class="hl-0">]);</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">handleClick</span><span class="hl-4">}</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>
<p>If you think you component does not need to re-render any more, just returning React node instead of unstable part</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">StableGreating</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// Even though the component doesn&#39;t re-render, the values of the props are still up to date</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-12">() </span><span class="hl-4">=&gt;</span><span class="hl-12"> </span><span class="hl-6">alert</span><span class="hl-12">(</span><span class="hl-2">props</span><span class="hl-12">.</span><span class="hl-2">message</span><span class="hl-12">)</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Greeting</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><span class="hl-7">// The above component works different this memoized component</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">MemoizedGreating</span><span class="hl-0"> = </span><span class="hl-6">memo</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// this component will re-render when message prop changed and returns new React node with new callback</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-12">() </span><span class="hl-4">=&gt;</span><span class="hl-12"> </span><span class="hl-6">alert</span><span class="hl-12">(</span><span class="hl-2">props</span><span class="hl-12">.</span><span class="hl-2">message</span><span class="hl-12">)</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Greeting</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#recipes" id="recipes" style="color: inherit; text-decoration: none;">
  <h2>Recipes</h2>
</a>

<a href="#every-callbacks-are-stable" id="every-callbacks-are-stable" style="color: inherit; text-decoration: none;">
  <h3>Every callbacks are stable</h3>
</a>
<p>You often have optimization problems with callbacks, Rativ will free you from those.
Let&#39;s get check the example below</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">ParentComponent</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">rerender</span><span class="hl-0"> = </span><span class="hl-6">useState</span><span class="hl-0">()[</span><span class="hl-8">1</span><span class="hl-0">];</span><br/><span class="hl-0">  </span><span class="hl-7">// this callback will be recreated every time the component re-renders</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">childCallback</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {};</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-13">ChildComponent</span><span class="hl-0"> </span><span class="hl-11">callback</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">callback</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-12">() </span><span class="hl-4">=&gt;</span><span class="hl-12"> </span><span class="hl-6">rerender</span><span class="hl-12">({})</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Re-render</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">};</span>
</code></pre>
<p>If the child component is not stable component, you must use useEvent() or similar library to make the childCallback() stable before passing it to child component. That makes you code more complex.
Rative does that for you automatically</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">ChildComponent</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">customCallback</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-6">callback</span><span class="hl-0">();</span><br/><span class="hl-0">  };</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// THIS STABLE PART, you can return React Node for rendering UI or UNSTABLE PART where you can use React hooks to control rendering</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-4">{</span><br/><span class="hl-12">        </span><span class="hl-7">// props.callback is stable, no matter the callback is changed by parent component</span><br/><span class="hl-12">        </span><span class="hl-7">// so it does not make OtherChildComponent re-render</span><br/><span class="hl-12">        </span><span class="hl-7">// and customCallback is stable too</span><br/><span class="hl-12">      </span><span class="hl-4">}</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-13">OtherChildComponent</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">props</span><span class="hl-12">.</span><span class="hl-2">callback</span><span class="hl-4">}</span><span class="hl-0"> </span><span class="hl-11">callback</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">customCallback</span><span class="hl-4">}</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#amazing-atoms" id="amazing-atoms" style="color: inherit; text-decoration: none;">
  <h3>Amazing atoms</h3>
</a>
<p>Rativ provides atom logic, it is similar to a store or pub/sub logic. You can store data with atom and receive updates everywhere. You can use atom locally or globally, it depends on kind of your data</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">singal</span><span class="hl-0">, </span><span class="hl-2">stable</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// use atom globally</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">themeAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-3">&quot;light&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">ThemeSwitcher</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">changeTheme</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">    </span><span class="hl-2">themeAtom</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> (</span><span class="hl-2">prev</span><span class="hl-0"> === </span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0"> ? </span><span class="hl-3">&quot;light&quot;</span><span class="hl-0"> : </span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0">));</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// return unstable part, that will re-render evertime themeAtom updated</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">changeTheme</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-2">themeAtom</span><span class="hl-12">.</span><span class="hl-2">state</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">Counter</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// use atom locally</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">countAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">increment</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">countAtom</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">prev</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// this unstable part will re-render when countAtom or themeAtom updated</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// receive data from global atom</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">theme</span><span class="hl-0"> = </span><span class="hl-2">themeAtom</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">;</span><br/><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">style</span><span class="hl-0"> =</span><br/><span class="hl-0">      </span><span class="hl-2">theme</span><span class="hl-0"> === </span><span class="hl-3">&quot;dark&quot;</span><br/><span class="hl-0">        ? { </span><span class="hl-2">backgroundColor:</span><span class="hl-0"> </span><span class="hl-3">&quot;black&quot;</span><span class="hl-0">, </span><span class="hl-2">color:</span><span class="hl-0"> </span><span class="hl-3">&quot;white&quot;</span><span class="hl-0"> }</span><br/><span class="hl-0">        : { </span><span class="hl-2">backgroundColor:</span><span class="hl-0"> </span><span class="hl-3">&quot;white&quot;</span><span class="hl-0">, </span><span class="hl-2">color:</span><span class="hl-0"> </span><span class="hl-3">&quot;black&quot;</span><span class="hl-0"> };</span><br/><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-0"> </span><span class="hl-11">style</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">style</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-2">countAtom</span><span class="hl-12">.</span><span class="hl-2">state</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">increment</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Increment</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>
<p>There are 3 kinds of atom: computed, emittable, and updatable atoms</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">atom</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rative&quot;</span><span class="hl-0">;</span><br/><span class="hl-7">// normal atom, you can update it by using set() function or assign new value to countAtom.state</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">countAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">factorAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">1</span><span class="hl-0">);</span><br/><br/><span class="hl-7">// contruct computed atom. The computed atom retrieves the computed function, this function will be called every time its dependency atoms are updated</span><br/><span class="hl-7">// in this case, it depends on countAtom and factorAtom</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">bigCountAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">countAtom</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0"> * </span><span class="hl-2">factorAtom</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><span class="hl-7">// you can update the computed atom, but you must be aware that when its dependency atoms are changed, it receives a new value from a computed function</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">accessTokenAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-3">&quot;USER_ACCESS_TOKEN&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">getUserProfile</span><span class="hl-0"> = (</span><span class="hl-2">token</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">&quot;API_URL&quot;</span><span class="hl-0">, { </span><span class="hl-2">headers:</span><span class="hl-0"> { </span><span class="hl-2">authorization:</span><span class="hl-0"> </span><span class="hl-2">token</span><span class="hl-0"> } }).</span><span class="hl-6">then</span><span class="hl-0">((</span><span class="hl-2">res</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">    </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">()</span><br/><span class="hl-0">  );</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">userProfileAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-4">async</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">accessToken</span><span class="hl-0"> = </span><span class="hl-2">accessTokenAtom</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">accessToken</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> { </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&quot;Anonymous&quot;</span><span class="hl-0"> };</span><br/><span class="hl-0">  </span><span class="hl-7">// no await needed</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">profile</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">getUserProfile</span><span class="hl-0">(</span><span class="hl-2">accessToken</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">pofile</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">updateEmail</span><span class="hl-0"> = </span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">email</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// call API to update profile email</span><br/><span class="hl-0">  </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">updateEmail</span><span class="hl-0">(</span><span class="hl-2">userProfileAtom</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0">, </span><span class="hl-2">email</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">// update atom state to make sure all UI are updated as well</span><br/><span class="hl-0">  </span><span class="hl-2">userProfileAtom</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> ({</span><br/><span class="hl-0">    ...</span><span class="hl-2">prev</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">email</span><span class="hl-0">,</span><br/><span class="hl-0">  }));</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">logout</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// after clearing access token, userProfileAtom will re-compute and its stable will be { name: &quot;Anonymous&quot; }</span><br/><span class="hl-0">  </span><span class="hl-2">accessTokenAtom</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-3">&quot;&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-7">// construct emittable atom, the emittable atom retrieves a reducer (yep, it is like Redux reducer)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">counterAtom</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">, (</span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">action</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">action</span><span class="hl-0"> === </span><span class="hl-3">&quot;increment&quot;</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">action</span><span class="hl-0"> === </span><span class="hl-3">&quot;decrement&quot;</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0"> - </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-2">counterAtom</span><span class="hl-0">.</span><span class="hl-6">emit</span><span class="hl-0">(</span><span class="hl-3">&quot;increment&quot;</span><span class="hl-0">);</span><br/><span class="hl-2">counterAtom</span><span class="hl-0">.</span><span class="hl-6">emit</span><span class="hl-0">(</span><span class="hl-3">&quot;decrement&quot;</span><span class="hl-0">);</span>
</code></pre>
<p>To handle atom changes, you can use <code>watch</code> function. A <code>watch</code> function retrieves changeSelector and options</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">a</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">1</span><span class="hl-0">);</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">b</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">2</span><span class="hl-0">);</span><br/><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">sum</span><span class="hl-0">: </span><span class="hl-13">number</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// when result of a plus b is changed, the watch callback will be called</span><br/><span class="hl-6">watch</span><span class="hl-0">(</span><br/><span class="hl-0">  () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">a</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0"> + </span><span class="hl-2">b</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">,</span><br/><span class="hl-0">  (</span><span class="hl-2">result</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-3">&quot;result:&quot;</span><span class="hl-0">, </span><span class="hl-2">result</span><span class="hl-0">);</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-7">// OR we can pass only the watching change function, the function will be called immediately after watching starts and whenever the atoms that it depends on changed</span><br/><span class="hl-6">watch</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-2">sum</span><span class="hl-0"> = </span><span class="hl-2">a</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0"> + </span><span class="hl-2">b</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">sum</span><span class="hl-0">); </span><span class="hl-7">// CONSOLE: 3</span><br/><br/><span class="hl-2">a</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">++;</span><br/><span class="hl-7">// CONSOLE: result: 4</span>
</code></pre>

<a href="#dealing-with-async-data" id="dealing-with-async-data" style="color: inherit; text-decoration: none;">
  <h3>Dealing with async data</h3>
</a>
<p>Atom can handle async with ease</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">user</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span><span class="hl-0">).</span><span class="hl-6">then</span><span class="hl-0">((</span><span class="hl-2">res</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">    </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">()</span><br/><span class="hl-0">  )</span><br/><span class="hl-0">);</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-2">loading</span><span class="hl-0">); </span><span class="hl-7">// true</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">); </span><span class="hl-7">// undefined</span><br/><span class="hl-7">// wait in few seconds</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-2">loading</span><span class="hl-0">); </span><span class="hl-7">// false</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">);</span><br/><span class="hl-7">/*</span><br/><span class="hl-7">{</span><br/><span class="hl-7">  &quot;id&quot;: 1,</span><br/><span class="hl-7">  &quot;name&quot;: &quot;Leanne Graham&quot;,</span><br/><span class="hl-7">  &quot;username&quot;: &quot;Bret&quot;,</span><br/><span class="hl-7">  &quot;email&quot;: &quot;Sincere@april.biz&quot;,</span><br/><span class="hl-7">  &quot;address&quot;: {</span><br/><span class="hl-7">    &quot;street&quot;: &quot;Kulas Light&quot;,</span><br/><span class="hl-7">    &quot;suite&quot;: &quot;Apt. 556&quot;,</span><br/><span class="hl-7">    &quot;city&quot;: &quot;Gwenborough&quot;,</span><br/><span class="hl-7">    &quot;zipcode&quot;: &quot;92998-3874&quot;,</span><br/><span class="hl-7">    &quot;geo&quot;: {</span><br/><span class="hl-7">      &quot;lat&quot;: &quot;-37.3159&quot;,</span><br/><span class="hl-7">      &quot;lng&quot;: &quot;81.1496&quot;</span><br/><span class="hl-7">    }</span><br/><span class="hl-7">  },</span><br/><span class="hl-7">  &quot;phone&quot;: &quot;1-770-736-8031 x56442&quot;,</span><br/><span class="hl-7">  &quot;website&quot;: &quot;hildegard.org&quot;,</span><br/><span class="hl-7">  &quot;company&quot;: {</span><br/><span class="hl-7">    &quot;name&quot;: &quot;Romaguera-Crona&quot;,</span><br/><span class="hl-7">    &quot;catchPhrase&quot;: &quot;Multi-layered client-server neural-net&quot;,</span><br/><span class="hl-7">    &quot;bs&quot;: &quot;harness real-time e-markets&quot;</span><br/><span class="hl-7">  }</span><br/><span class="hl-7">}</span><br/><span class="hl-7">*/</span><br/><br/><span class="hl-7">// assigning promise object to atom</span><br/><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span><span class="hl-0">).</span><span class="hl-6">then</span><span class="hl-0">((</span><span class="hl-2">res</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">    </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">()</span><br/><span class="hl-0">  )</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-7">// the above example equivalents to this</span><br/><span class="hl-2">user</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">();</span><br/><span class="hl-0">});</span>
</code></pre>
<p>Async counter example</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">delay</span><span class="hl-0">, </span><span class="hl-2">atom</span><span class="hl-0">, </span><span class="hl-2">slot</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">count</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">increment</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-6">delay</span><span class="hl-0">(</span><span class="hl-8">1000</span><span class="hl-0">).</span><span class="hl-6">then</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">prev</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">));</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">CounterWithoutSlot</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// a promise object will be thrown if trying access state of processing atom</span><br/><span class="hl-0">  </span><span class="hl-7">// Suspense will handle a promise object and show fallback</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-7">// unstable part</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">h1</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">incrementAsync</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-2">count</span><span class="hl-12">.</span><span class="hl-2">state</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// with slot, dont need to wrap this component by Suspense</span><br/><span class="hl-7">// we can control loading state inside this component</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">CounterWithSlot</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// return React node instead of unstable part</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-13">Suspense</span><span class="hl-0"> </span><span class="hl-11">fallback</span><span class="hl-0">=</span><span class="hl-3">&quot;Custom processing message&quot;</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-6">slot</span><span class="hl-12">(</span><span class="hl-2">count</span><span class="hl-12">)</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-13">Suspense</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">App</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-13">Suspense</span><span class="hl-0"> </span><span class="hl-11">fallback</span><span class="hl-0">=</span><span class="hl-3">&quot;Processing...&quot;</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-13">CounterWithoutSlot</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-13">CounterWithSlot</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;/</span><span class="hl-13">Suspense</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#selective-update-with-slots" id="selective-update-with-slots" style="color: inherit; text-decoration: none;">
  <h3>Selective update with Slots</h3>
</a>
<p>Sometimes you need some selective parts of the component re-render and keep other parts are stable, you can achieve that goal with slots. Slot can be used with any component type (normal React component and stable component)</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">theme</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">Counter</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">count</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// we returns React node instead of unstable part, that means the button does not re-render any more</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        Counter:</span><br/><span class="hl-0">        </span><span class="hl-4">{</span><br/><span class="hl-12">          </span><span class="hl-7">// we still need display current count value</span><br/><span class="hl-12">          </span><span class="hl-6">slot</span><span class="hl-12">(</span><span class="hl-2">count</span><span class="hl-12">) </span><span class="hl-7">// this equipvalent to slot(() =&gt; count.state)</span><br/><span class="hl-12">        </span><span class="hl-4">}</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      Theme: </span><span class="hl-4">{</span><br/><span class="hl-12">        </span><span class="hl-7">// slot can be used with local/global atoms</span><br/><span class="hl-12">        </span><span class="hl-6">slot</span><span class="hl-12">(</span><span class="hl-2">theme</span><span class="hl-12">)</span><br/><span class="hl-12">      </span><span class="hl-4">}</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// using slot with normal React component</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">DataView</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-13">BigDataTable</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">      Theme </span><span class="hl-4">{</span><span class="hl-6">slot</span><span class="hl-12">(</span><span class="hl-2">theme</span><span class="hl-12">)</span><span class="hl-4">}</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>
<p>Slot can work with local/global mode</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">theme</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0">);</span><br/><span class="hl-7">// better performance than local slot</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">themeSlot</span><span class="hl-0"> = </span><span class="hl-6">slot</span><span class="hl-0">(</span><span class="hl-2">theme</span><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">DataView</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-13">BigDataTable</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">      Local Theme Slot: </span><span class="hl-4">{</span><span class="hl-6">slot</span><span class="hl-12">(</span><span class="hl-2">theme</span><span class="hl-12">)</span><span class="hl-4">}</span><br/><span class="hl-0">      Global Theme Slot: </span><span class="hl-4">{</span><span class="hl-2">themeSlot</span><span class="hl-4">}</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#element-directive" id="element-directive" style="color: inherit; text-decoration: none;">
  <h3>Element directive</h3>
</a>
<p>Rativ supports directives through the <code>directive</code> function. This is just a side effect over the ref, but is useful in that it resembles typical bindings and there can be multiple bindings on the same element without conflict. This makes it a better tool for reusable DOM element behavior.</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">directive</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><span class="hl-7">// define clickOutside directive</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">clickOutside</span><span class="hl-0"> = (</span><span class="hl-2">onClick</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// return a directive body</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><span class="hl-2">element</span><span class="hl-0">: </span><span class="hl-13">HTMLElement</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">handleClick</span><span class="hl-0"> = (</span><span class="hl-2">e</span><span class="hl-0">: </span><span class="hl-13">any</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> !</span><span class="hl-2">element</span><span class="hl-0">.</span><span class="hl-6">contains</span><span class="hl-0">(</span><span class="hl-2">e</span><span class="hl-0">.</span><span class="hl-2">target</span><span class="hl-0">) &amp;&amp; </span><span class="hl-6">onClick</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-2">document</span><span class="hl-0">.</span><span class="hl-2">body</span><span class="hl-0">.</span><span class="hl-6">addEventListener</span><span class="hl-0">(</span><span class="hl-3">&quot;click&quot;</span><span class="hl-0">, </span><span class="hl-2">handleClick</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-2">document</span><span class="hl-0">.</span><span class="hl-2">body</span><span class="hl-0">.</span><span class="hl-6">removeEventListener</span><span class="hl-0">(</span><span class="hl-3">&quot;click&quot;</span><span class="hl-0">, </span><span class="hl-2">handleClick</span><span class="hl-0">);</span><br/><span class="hl-0">    };</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">Modal</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">show</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-4">true</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">showModal</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">show</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-4">true</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">hideModal</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">show</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-4">false</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">modalRef</span><span class="hl-0"> = </span><span class="hl-6">directive</span><span class="hl-0">(</span><span class="hl-6">clickOutside</span><span class="hl-0">(</span><span class="hl-2">hideModal</span><span class="hl-0">)); </span><span class="hl-7">// it also support multiple directives directive([dir1, dir2, dir3, ...])</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-4">{</span><span class="hl-0">!</span><span class="hl-2">show</span><span class="hl-12">.</span><span class="hl-2">state</span><span class="hl-12"> </span><span class="hl-0">&amp;&amp;</span><span class="hl-12"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-12"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">showModal</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-12">Show modal</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-4">}</span><br/><span class="hl-0">      </span><span class="hl-4">{</span><span class="hl-2">show</span><span class="hl-12">.</span><span class="hl-2">state</span><span class="hl-12"> </span><span class="hl-0">&amp;&amp;</span><span class="hl-12"> (</span><br/><span class="hl-12">        </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-12"> </span><span class="hl-11">className</span><span class="hl-0">=</span><span class="hl-3">&quot;modal&quot;</span><span class="hl-12"> </span><span class="hl-11">ref</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">modalRef</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><br/><span class="hl-12">          Modal contents</span><br/><span class="hl-12">        </span><span class="hl-9">&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-12">      )</span><span class="hl-4">}</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#mutation-helpers" id="mutation-helpers" style="color: inherit; text-decoration: none;">
  <h3>Mutation helpers</h3>
</a>
<p>Rativ provides a slot of mutation helpers, that helps you to mutate atom state with ease, chaining update</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">sort</span><span class="hl-0">, </span><span class="hl-2">prop</span><span class="hl-0">, </span><span class="hl-2">item</span><span class="hl-0">, </span><span class="hl-2">push</span><span class="hl-0">, </span><span class="hl-2">add</span><span class="hl-0">, </span><span class="hl-2">toggle</span><span class="hl-0">, </span><span class="hl-2">push</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rative/mutation&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">complexData</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">userCount:</span><span class="hl-0"> </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">token:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">todos:</span><span class="hl-0"> [</span><br/><span class="hl-0">    { </span><span class="hl-2">id:</span><span class="hl-0"> </span><span class="hl-8">1</span><span class="hl-0">, </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;Todo 1&quot;</span><span class="hl-0">, </span><span class="hl-2">completed:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0"> },</span><br/><span class="hl-0">    { </span><span class="hl-2">id:</span><span class="hl-0"> </span><span class="hl-8">2</span><span class="hl-0">, </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;Todo 2&quot;</span><span class="hl-0">, </span><span class="hl-2">completed:</span><span class="hl-0"> </span><span class="hl-4">false</span><span class="hl-0"> },</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-2">complexData</span><span class="hl-0">.</span><span class="hl-6">mutate</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-7">// increse userCount</span><br/><span class="hl-0">  </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;userCount&quot;</span><span class="hl-0">, </span><span class="hl-6">add</span><span class="hl-0">(</span><span class="hl-8">10</span><span class="hl-0">)),</span><br/><span class="hl-0">  </span><span class="hl-7">// change token value</span><br/><span class="hl-0">  </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;token&quot;</span><span class="hl-0">, () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-13">Math</span><span class="hl-0">.</span><span class="hl-6">random</span><span class="hl-0">().</span><span class="hl-6">toString</span><span class="hl-0">()),</span><br/><span class="hl-0">  </span><span class="hl-6">prop</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-3">&quot;todos&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// update items that match predicate</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">(</span><br/><span class="hl-0">      (</span><span class="hl-2">todo</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">todo</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0"> === </span><span class="hl-8">1</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-7">// rename todo</span><br/><span class="hl-0">      </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">, () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-3">&quot;TODO 1&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">      </span><span class="hl-7">// toggle the boolean value</span><br/><span class="hl-0">      </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;completed&quot;</span><span class="hl-0">, </span><span class="hl-6">toggle</span><span class="hl-0">())</span><br/><span class="hl-0">    ),</span><br/><span class="hl-0">    </span><span class="hl-7">// remove todo(2) from the todos array</span><br/><span class="hl-0">    </span><span class="hl-6">exclude</span><span class="hl-0">((</span><span class="hl-2">todo</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">todo</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0"> === </span><span class="hl-8">2</span><span class="hl-0">),</span><br/><span class="hl-0">    </span><span class="hl-6">push</span><span class="hl-0">({ </span><span class="hl-2">id:</span><span class="hl-0"> </span><span class="hl-8">3</span><span class="hl-0">, </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;Todo 3&quot;</span><span class="hl-0"> }, { </span><span class="hl-2">id:</span><span class="hl-0"> </span><span class="hl-8">4</span><span class="hl-0">, </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;Todo 4&quot;</span><span class="hl-0"> }),</span><br/><span class="hl-0">    </span><span class="hl-7">// sort the todo list by title</span><br/><span class="hl-0">    </span><span class="hl-6">sort</span><span class="hl-0">((</span><span class="hl-2">x</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">x</span><span class="hl-0">.</span><span class="hl-6">asc</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">)) </span><span class="hl-7">// this equipvalents to sort(x =&gt; x.asc(todo =&gt; todo.title))</span><br/><span class="hl-0">  )</span><br/><span class="hl-0">);</span>
</code></pre>

<a href="#performance-test" id="performance-test" style="color: inherit; text-decoration: none;">
  <h3>Performance Test</h3>
</a>
<p><a href="https://codesandbox.io/s/rativ-performance-smuok9?file=/src/App.js">https://codesandbox.io/s/rativ-performance-smuok9?file=/src/App.js</a></p>

<a href="#caveats" id="caveats" style="color: inherit; text-decoration: none;">
  <h2>Caveats</h2>
</a>

<a href="#do-not-destruct-props-object" id="do-not-destruct-props-object" style="color: inherit; text-decoration: none;">
  <h3>Do not destruct props object</h3>
</a>
<p>The props object is always fresh, you can access the latest prop values with ease. If you try to destruct prop values, your values might be stale afterward</p>
<p>RIGHT</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">GreetingButton</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">onClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">message</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">onClick</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Say Hi</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span>
</code></pre>
<p>WRONG</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">GreetingButton</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(({ </span><span class="hl-2">message</span><span class="hl-0"> }) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">onClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">message</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">onClick</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Say Hi</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#taking-snapshot-of-atom" id="taking-snapshot-of-atom" style="color: inherit; text-decoration: none;">
  <h3>Taking snapshot of atom</h3>
</a>
<p>Rativ atom can create and revert snapshot with ease. The atom snapshot is useful for writing unit testing</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">snapshot</span><span class="hl-0">, </span><span class="hl-2">atom</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">count</span><span class="hl-0"> = </span><span class="hl-6">atom</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">++; </span><span class="hl-7">// count = 1</span><br/><span class="hl-7">// create a snapshot from current state</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">revertCount1</span><span class="hl-0"> = </span><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-6">snapshot</span><span class="hl-0">();</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">++; </span><span class="hl-7">// count = 2</span><br/><span class="hl-6">reverCount1</span><span class="hl-0">();</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">; </span><span class="hl-7">// count = 1</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">++; </span><span class="hl-7">// count = 2</span><br/><span class="hl-7">// create a snapshot with initial state</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">revertCount2</span><span class="hl-0"> = </span><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-6">snapshort</span><span class="hl-0">(</span><span class="hl-4">true</span><span class="hl-0">);</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">; </span><span class="hl-7">// count = 0</span><br/><span class="hl-6">reverCount1</span><span class="hl-0">();</span><br/><span class="hl-2">count</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">; </span><span class="hl-7">// count = 2</span><br/><br/><span class="hl-7">// create snapshot for multiple atoms</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">revertAll</span><span class="hl-0"> = </span><span class="hl-6">snapshot</span><span class="hl-0">([</span><span class="hl-2">atom1</span><span class="hl-0">, </span><span class="hl-2">atom2</span><span class="hl-0">] </span><span class="hl-7">/*, reset  */</span><span class="hl-0">);</span><br/><br/><span class="hl-7">// execute the callback with new snapshots (from current state) of atom1 and atom2</span><br/><span class="hl-7">// after callback done, the input atoms are reverted automatically</span><br/><span class="hl-6">snapshot</span><span class="hl-0">([</span><span class="hl-2">atom1</span><span class="hl-0">, </span><span class="hl-2">atom2</span><span class="hl-0">], </span><span class="hl-2">callback</span><span class="hl-0">);</span><br/><br/><span class="hl-7">// execute the callback with new snapshots (from initial state) of atom1 and atom2</span><br/><span class="hl-6">snapshot</span><span class="hl-0">([</span><span class="hl-2">atom1</span><span class="hl-0">, </span><span class="hl-2">atom2</span><span class="hl-0">], </span><span class="hl-2">reset</span><span class="hl-0">, </span><span class="hl-2">callback</span><span class="hl-0">);</span>
</code></pre>

<a href="#api-reference" id="api-reference" style="color: inherit; text-decoration: none;">
  <h2>API reference</h2>
</a>
<p><a href="https://linq2js.github.io/rativ/">https://linq2js.github.io/rativ/</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-reference"><a href="modules.html#_" class="tsd-kind-icon">$</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/ComponentBuilder.html" class="tsd-kind-icon">Component<wbr/>Builder</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#AnyComponent" class="tsd-kind-icon">Any<wbr/>Component</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Atom" class="tsd-kind-icon">Atom</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#AtomExtraProps" class="tsd-kind-icon">Atom<wbr/>Extra<wbr/>Props</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#AtomHelpers" class="tsd-kind-icon">Atom<wbr/>Helpers</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AtomOptions" class="tsd-kind-icon">Atom<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Awaiter" class="tsd-kind-icon">Awaiter</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#ComputedAtom" class="tsd-kind-icon">Computed<wbr/>Atom</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Context" class="tsd-kind-icon">Context</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CreateAtom" class="tsd-kind-icon">Create<wbr/>Atom</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CreateSlot" class="tsd-kind-icon">Create<wbr/>Slot</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CreateSnapshot" class="tsd-kind-icon">Create<wbr/>Snapshot</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Directive" class="tsd-kind-icon">Directive</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Effect" class="tsd-kind-icon">Effect</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#EffectContext" class="tsd-kind-icon">Effect<wbr/>Context</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Emit" class="tsd-kind-icon">Emit</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#EmittableAtom" class="tsd-kind-icon">Emittable<wbr/>Atom</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#EmittableOptions" class="tsd-kind-icon">Emittable<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Get" class="tsd-kind-icon">Get</a></li><li class="tsd-kind-type-alias"><a href="modules.html#InternalContext" class="tsd-kind-icon">Internal<wbr/>Context</a></li><li class="tsd-kind-type-alias"><a href="modules.html#KeyOf" class="tsd-kind-icon">Key<wbr/>Of</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Listener" class="tsd-kind-icon">Listener</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Mutation" class="tsd-kind-icon">Mutation</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#NoInfer" class="tsd-kind-icon">No<wbr/>Infer</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Nullable" class="tsd-kind-icon">Nullable</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Refs" class="tsd-kind-icon">Refs</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Scope" class="tsd-kind-icon">Scope</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Set" class="tsd-kind-icon">Set</a></li><li class="tsd-kind-type-alias"><a href="modules.html#StableOptions" class="tsd-kind-icon">Stable<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Task" class="tsd-kind-icon">Task</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#UpdatableAtom" class="tsd-kind-icon">Updatable<wbr/>Atom</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Wait" class="tsd-kind-icon">Wait</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Watch" class="tsd-kind-icon">Watch</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#WatchOptions" class="tsd-kind-icon">Watch<wbr/>Options</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#atom" class="tsd-kind-icon">atom</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#create" class="tsd-kind-icon">create</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#defaultProps" class="tsd-kind-icon">default<wbr/>Props</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#delay" class="tsd-kind-icon">delay</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#directive" class="tsd-kind-icon">directive</a></li><li class="tsd-kind-function"><a href="modules.html#effect" class="tsd-kind-icon">effect</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#family" class="tsd-kind-icon">family</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isAtom" class="tsd-kind-icon">is<wbr/>Atom</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#keyOf" class="tsd-kind-icon">key<wbr/>Of</a></li><li class="tsd-kind-function"><a href="modules.html#slot" class="tsd-kind-icon">slot</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#snapshot" class="tsd-kind-icon">snapshot</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#stable" class="tsd-kind-icon">stable</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#wait" class="tsd-kind-icon">wait</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#watch" class="tsd-kind-icon">watch</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>