<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>rativ</title><meta name="description" content="Documentation for rativ"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">rativ</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>rativ </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><ul>
<li><a href="#rativ"><code>Rativ</code></a><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#recipes">Recipes</a><ul>
<li><a href="#every-callbacks-are-stable">Every callbacks are stable</a></li>
<li><a href="#amazing-signals">Amazing signals</a></li>
<li><a href="#performance-test">Performance Test</a></li>
</ul>
</li>
<li><a href="#caveats">Caveats</a><ul>
<li><a href="#do-not-destruct-props-object">Do not destruct props object</a></li>
</ul>
</li>
<li><a href="#api-reference">API reference</a></li>
</ul>
</li>
</ul>

<a href="#rativ" id="rativ" style="color: inherit; text-decoration: none;">
  <h1><code>Rativ</code></h1>
</a>
<p>A React library for creating reactive components</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p><strong>with NPM</strong></p>
<pre><code class="language-bash"><span class="hl-0">npm i rativ --save</span>
</code></pre>
<p><strong>with YARN</strong></p>
<pre><code class="language-bash"><span class="hl-0">yarn add rativ</span>
</code></pre>

<a href="#motivation" id="motivation" style="color: inherit; text-decoration: none;">
  <h2>Motivation</h2>
</a>
<p>This library is inspired by SolidJS. A component is divided into 2 parts: Stable and Unstable. Stable part contains the declarations that are fixed since initialization phase, they runs once only, Unstable part contains the changes that are re-rendered continuously by changes of the component itself or its parent. Stable part cannot contains any React hook but Unstable part can</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">stable</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">MyComp</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// Stable part</span><br/><span class="hl-0">  </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">myvar</span><span class="hl-0"> = </span><span class="hl-8">0</span><span class="hl-0">;</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// Unstable part, it acts like functional component body</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">useState</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-7">// return React node as usual</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>
<p>With a stable part, we can declare stable variables, and functions, which means we don&#39;t need useRef, useMemo, useCallback any more. However, we need those hooks if we need variables that can be updated when component props are changed</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">MyComp</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useMemo() hook</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">computedValue</span><span class="hl-0"> = </span><span class="hl-6">doHeavyComputationWithProps</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useRef() hook</span><br/><span class="hl-0">  </span><span class="hl-4">let</span><span class="hl-0"> </span><span class="hl-2">stableVariable</span><span class="hl-0"> = </span><span class="hl-8">0</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">// we don&#39;t need useCallback() or useEvent() to optimize this</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">handleClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// the props object is always fresh</span><br/><span class="hl-0">    </span><span class="hl-7">// so DO NOT destruct it</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">name</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// if we need a variable that can update when props updated, just put it in unstable part</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">dynamicVariable</span><span class="hl-0"> = </span><span class="hl-6">useMemo</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {}, [</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">something</span><span class="hl-0">]);</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">handleClick</span><span class="hl-4">}</span><span class="hl-9">&gt;&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#recipes" id="recipes" style="color: inherit; text-decoration: none;">
  <h2>Recipes</h2>
</a>

<a href="#every-callbacks-are-stable" id="every-callbacks-are-stable" style="color: inherit; text-decoration: none;">
  <h3>Every callbacks are stable</h3>
</a>
<p>You often have optimization problems with callbacks, Rativ will free you from those.
Let&#39;s get check the example below</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">ParentComponent</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">rerender</span><span class="hl-0"> = </span><span class="hl-6">useState</span><span class="hl-0">()[</span><span class="hl-8">1</span><span class="hl-0">];</span><br/><span class="hl-0">  </span><span class="hl-7">// this callback will be recreated every time the component re-renders</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">childCallback</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {};</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-12">ChildComponent</span><span class="hl-0"> </span><span class="hl-11">callback</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">callback</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-13">() </span><span class="hl-4">=&gt;</span><span class="hl-13"> </span><span class="hl-6">rerender</span><span class="hl-13">({})</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Re-render</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">};</span>
</code></pre>
<p>If the child component is not stable component, you must use useEvent() or similar library to make the childCallback() stable before passing it to child component. That makes you code more complex.
Rative does that for you automatically</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">ChildComponent</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">customCallback</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-6">callback</span><span class="hl-0">();</span><br/><span class="hl-0">  };</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// THIS STABLE PART, you can return React Node for rendering UI or UNSTABLE PART where you can use React hooks to control rendering</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-4">{</span><br/><span class="hl-13">        </span><span class="hl-7">// props.callback is stable, no matter the callback is changed by parent component</span><br/><span class="hl-13">        </span><span class="hl-7">// so it does not make OtherChildComponent re-render</span><br/><span class="hl-13">        </span><span class="hl-7">// and customCallback is stable too</span><br/><span class="hl-13">      </span><span class="hl-4">}</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-12">OtherChildComponent</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">props</span><span class="hl-13">.</span><span class="hl-2">callback</span><span class="hl-4">}</span><span class="hl-0"> </span><span class="hl-11">callback</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">customCallback</span><span class="hl-4">}</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#amazing-signals" id="amazing-signals" style="color: inherit; text-decoration: none;">
  <h3>Amazing signals</h3>
</a>
<p>Rativ provides signal logic, it is similar to a store or pub/sub logic. You can store data with signal and receive updates everywhere. You can use signal locally or globally, it depends on kind of your data</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">singal</span><span class="hl-0">, </span><span class="hl-2">stable</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;rativ&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// use signal globally</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">themeSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-3">&quot;light&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">ThemeSwitcher</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">changeTheme</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><br/><span class="hl-0">    </span><span class="hl-2">themeSignal</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> (</span><span class="hl-2">prev</span><span class="hl-0"> === </span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0"> ? </span><span class="hl-3">&quot;light&quot;</span><span class="hl-0"> : </span><span class="hl-3">&quot;dark&quot;</span><span class="hl-0">));</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// return unstable part, that will re-render evertime themeSignal updated</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">changeTheme</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-2">themeSignal</span><span class="hl-13">.</span><span class="hl-6">get</span><span class="hl-13">()</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">Counter</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// use signal locally</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">countSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">increment</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">countSignal</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-2">prev</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-7">// this unstable part will re-render when countSignal or themeSignal updated</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">// receive data from global signal</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">theme</span><span class="hl-0"> = </span><span class="hl-2">themeSignal</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">style</span><span class="hl-0"> =</span><br/><span class="hl-0">      </span><span class="hl-2">theme</span><span class="hl-0"> === </span><span class="hl-3">&quot;dark&quot;</span><br/><span class="hl-0">        ? { </span><span class="hl-2">backgroundColor:</span><span class="hl-0"> </span><span class="hl-3">&quot;black&quot;</span><span class="hl-0">, </span><span class="hl-2">color:</span><span class="hl-0"> </span><span class="hl-3">&quot;white&quot;</span><span class="hl-0"> }</span><br/><span class="hl-0">        : { </span><span class="hl-2">backgroundColor:</span><span class="hl-0"> </span><span class="hl-3">&quot;white&quot;</span><span class="hl-0">, </span><span class="hl-2">color:</span><span class="hl-0"> </span><span class="hl-3">&quot;black&quot;</span><span class="hl-0"> };</span><br/><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-10">div</span><span class="hl-0"> </span><span class="hl-11">style</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">style</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><span class="hl-4">{</span><span class="hl-2">countSignal</span><span class="hl-13">.</span><span class="hl-6">get</span><span class="hl-13">()</span><span class="hl-4">}</span><span class="hl-9">&lt;/</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><br/><span class="hl-0">        </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">increment</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Increment</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;/</span><span class="hl-10">div</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    );</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">});</span>
</code></pre>
<p>There are 3 kinds of signal: computed, emittable, and normal signals</p>
<pre><code class="language-js"><span class="hl-7">// normal signal, you can update it by using set() function or assign new value to countSignal.state</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">countSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">);</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">factorSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-8">1</span><span class="hl-0">);</span><br/><br/><span class="hl-7">// contruct computed signal. The computed signal retrieves the computed function, this function will be called every time its dependency signals are updated</span><br/><span class="hl-7">// in this case, it depends on countSignal and factorSignal</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">bigCountSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(() </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">countSignal</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">() * </span><span class="hl-2">factorSignal</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">();</span><br/><span class="hl-0">});</span><br/><span class="hl-7">// you can update the computed signal, but you must be aware that when its dependency signals are changed, it receives a new value from a computed function</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">accessTokenSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-3">&quot;USER_ACCESS_TOKEN&quot;</span><span class="hl-0">);</span><br/><span class="hl-7">// computed signal can works with async function</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">userProfileSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-4">async</span><span class="hl-0"> () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">accessToken</span><span class="hl-0"> = </span><span class="hl-2">accessTokenSignal</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (!</span><span class="hl-2">accessToken</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> { </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&quot;Anonymous&quot;</span><span class="hl-0"> };</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">profile</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">getUserProfile</span><span class="hl-0">(</span><span class="hl-2">accessToken</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">pofile</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">updateEmail</span><span class="hl-0"> = </span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">email</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// call API to update profile email</span><br/><span class="hl-0">  </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">updateEmail</span><span class="hl-0">(</span><span class="hl-2">userProfileSignal</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">().</span><span class="hl-2">id</span><span class="hl-0">, </span><span class="hl-2">email</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">// update signal state to make sure all UI are updated as well</span><br/><span class="hl-0">  </span><span class="hl-2">userProfileSignal</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">((</span><span class="hl-2">prev</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> ({</span><br/><span class="hl-0">    ...</span><span class="hl-2">prev</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">email</span><span class="hl-0">,</span><br/><span class="hl-0">  }));</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">logout</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// after clearing access token, userProfileSignal will re-compute and its stable will be { name: &quot;Anonymous&quot; }</span><br/><span class="hl-0">  </span><span class="hl-2">accessTokenSignal</span><span class="hl-0">.</span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-3">&quot;&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-7">// construct emittable signal, the emittable signal retrieves a reducer (yep, it is like Redux reducer)</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">counterSignal</span><span class="hl-0"> = </span><span class="hl-6">signal</span><span class="hl-0">(</span><span class="hl-8">0</span><span class="hl-0">, (</span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">action</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">action</span><span class="hl-0"> === </span><span class="hl-3">&quot;increment&quot;</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0"> + </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-2">action</span><span class="hl-0"> === </span><span class="hl-3">&quot;decrement&quot;</span><span class="hl-0">) </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0"> - </span><span class="hl-8">1</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">state</span><span class="hl-0">;</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-2">counterSignal</span><span class="hl-0">.</span><span class="hl-6">emit</span><span class="hl-0">(</span><span class="hl-3">&quot;increment&quot;</span><span class="hl-0">);</span><br/><span class="hl-2">counterSignal</span><span class="hl-0">.</span><span class="hl-6">emit</span><span class="hl-0">(</span><span class="hl-3">&quot;decrement&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#performance-test" id="performance-test" style="color: inherit; text-decoration: none;">
  <h3>Performance Test</h3>
</a>
<p><a href="https://codesandbox.io/s/rativ-performance-smuok9?file=/src/App.js">https://codesandbox.io/s/rativ-performance-smuok9?file=/src/App.js</a></p>

<a href="#caveats" id="caveats" style="color: inherit; text-decoration: none;">
  <h2>Caveats</h2>
</a>

<a href="#do-not-destruct-props-object" id="do-not-destruct-props-object" style="color: inherit; text-decoration: none;">
  <h3>Do not destruct props object</h3>
</a>
<p>The props object is always fresh, you can access the latest prop values with ease. If you try to destruct prop values, your values might be stale afterward</p>
<p>RIGHT</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">GreetingButton</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">((</span><span class="hl-2">props</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">onClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">props</span><span class="hl-0">.</span><span class="hl-2">message</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">onClick</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Say Hi</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span>
</code></pre>
<p>WRONG</p>
<pre><code class="language-js"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">GreetingButton</span><span class="hl-0"> = </span><span class="hl-6">stable</span><span class="hl-0">(({ </span><span class="hl-2">message</span><span class="hl-0"> }) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">onClick</span><span class="hl-0"> = () </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-6">alert</span><span class="hl-0">(</span><span class="hl-2">message</span><span class="hl-0">);</span><br/><span class="hl-0">  };</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-4">{</span><span class="hl-2">onClick</span><span class="hl-4">}</span><span class="hl-9">&gt;</span><span class="hl-0">Say Hi</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><span class="hl-0">;</span><br/><span class="hl-0">});</span>
</code></pre>

<a href="#api-reference" id="api-reference" style="color: inherit; text-decoration: none;">
  <h2>API reference</h2>
</a>
<p><a href="https://linq2js.github.io/rativ/">https://linq2js.github.io/rativ/</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="modules.html#Context" class="tsd-kind-icon">Context</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CreateSignal" class="tsd-kind-icon">Create<wbr/>Signal</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#EmittableOptions" class="tsd-kind-icon">Emittable<wbr/>Options</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#EmittableSignal" class="tsd-kind-icon">Emittable<wbr/>Signal</a></li><li class="tsd-kind-type-alias"><a href="modules.html#InternalContext" class="tsd-kind-icon">Internal<wbr/>Context</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Listener" class="tsd-kind-icon">Listener</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#NoInfer" class="tsd-kind-icon">No<wbr/>Infer</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Refs" class="tsd-kind-icon">Refs</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Scope" class="tsd-kind-icon">Scope</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Signal" class="tsd-kind-icon">Signal</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Task" class="tsd-kind-icon">Task</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#UpdatableSignal" class="tsd-kind-icon">Updatable<wbr/>Signal</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Wait" class="tsd-kind-icon">Wait</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#delay" class="tsd-kind-icon">delay</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#isSignal" class="tsd-kind-icon">is<wbr/>Signal</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#signal" class="tsd-kind-icon">signal</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#stable" class="tsd-kind-icon">stable</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#task" class="tsd-kind-icon">task</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#wait" class="tsd-kind-icon">wait</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>